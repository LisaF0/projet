{% extends 'base.html.twig' %}

{% block title %}Boutique{% endblock %}

{% block body %}
    {% block nav %}
        {{ parent() }}
    {% endblock %}
    <div class="row">
        <section class="col-md-2 filterSection">
            <h3>Filtre</h3>
            {{ form(formFilter) }}
            <h3>Tri</h3>
            <div class="dropdown show">
            <a href="#" class="btn btn-secondary dropdown-toggle" role="button" id="dropdownMenuLink" 
            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Trier par</a>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                    <a href="{{ path('products_index', {sortBy : 'unitPrice', order : 'ASC'}) }}" class="btn">du - cher au + cher</a>
                    <a href="{{ path('products_index', {sortBy : 'unitPrice', order : 'DESC'}) }}" class="btn">du + cher au - cher</a>
                    <a href="{{ path('products_index', {sortBy : 'name', order : 'ASC'}) }}" class="btn">ordre alphabétique</a>
                </div>
            </div>
        </section>
        <section class="col-md-10">
            {% if products|length > 0 %}
            <h3>Nos Vins</h3>
                <div class="row product-container">
                    {% for product in products %}
                        <div class="col-md-4" >
                            <article>
                                <img src="{{ asset('img/' ~ product.photo )}}" alt="{{ 'Bouteille de ' ~ product.name }}" class="winePhoto">
                                <div>
                                    <h2 class="productName">{{ product.name }}</h2>
                                    <p>{{product.description }}</p>
                                    <p>{{ product.unitprice ~ '€'}}</p>
                                    {% if product.unitstock > 0 %}
                                    <form method="post" action="{{ path('cart_add', {'id': product.id} ) }}">
                                        <div class="qteAdd">
                                            <input type="number" id="quantity" name="quantity" min="1" max="{{ product.unitstock }}" value="1">
                                            <button type="submit" class="btn btn-secondary cartAdd"><i class="fas fa-cart-plus"></i> Ajouter au panier</button>
                                        </div>
                                    </form>
                                    {% endif %}
                                    {% if product.unitstock > 0 %}
                                        <p><i class="fas fa-check"></i> Disponible</p>
                                    {% else %}
                                        <p><i class="fas fa-times"></i> Indisponible</p>
                                    {% endif %}
                                </div>
                            </article>
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <div>
                    <p>Aucun article ne correspond à votre recherche.</p>
                </div>
            {% endif %}
        </section>
    </div>
    {% block footer %}
        {{ parent() }}
    {% endblock %}
{% endblock %}
{% block javascripts %}
    <script>
    // $('.dropdown-toggle').dropdown()
    // document.getElementById('filter_submit').addEventListener("click", function(e){
    //     e.preventDefault()
    //     let filtres = document.getElementsByClassName('form-check-input')
    //     let type = document.getElementById('filter_types_1')
    //     let labels = []
    //     for(var i = 0; i < filtres.length; i++){
    //         if(filtres[i].checked){
    //             labels.push(filtres[i].nextElementSibling.innerText)
    //         }
    //     }
    //     let label = type.nextElementSibling
    //     console.log(labels)
        
    // })

    

    
    </script>
{% endblock %}

